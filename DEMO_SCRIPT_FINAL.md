# デモ動画用 台本 (最終版)

**最終更新**: 2025-10-26
**バージョン**: 2.0.0 - スキルベースマッチング対応

## ✅ 完成度: 100%

全パターンのテストが成功しました。

---

## 🎯 デモ動画で使用する推奨質問

### 【推奨】パターン1: 基本形 (スキルベースマッチング)

**質問**:
```
札幌のSSの新SS(W)のOCR対象のエントリ1が人員不足で遅延しています。品川から応援を出せますか?
```

**期待されるAI応答（2025-10-26更新）**:
```
「SS」の「新SS(W)」の「OCR非対象」の「エントリ2」から
櫻井　由希恵さんを「OCR対象」の「エントリ1」へ移動
```

**重要な変更点**:
- ✅ **異なる工程間移動**: エントリ2 → エントリ1（スキルベース）
- ✅ **4階層のみ表記**: 拠点名なし
- ✅ **実名表示**: 櫻井　由希恵さん等

**実際のデータ**:
- 品川: 3名配置 (田中 太郎, 佐藤 花子, 鈴木 一郎) → 余剰
- 札幌: 1名配置 (井村 美子) → 不足

**テスト結果（2025-10-26）**:
- ✅ 4階層明示: 4/4
- ✅ オペレータ名: 櫻井　由希恵さん（ランダムで変わる）
- ✅ 配置転換提案: エントリ2 → エントリ1（異なる工程間移動）
- ✅ スキルベースマッチング動作確認
- ✅ 処理時間: 約26秒（Ollama起動含む）

---

### パターン2: 補正工程の不足

**質問**:
```
札幌のSSの新SS(W)のOCR対象の補正工程が人員不足です。品川から移動できますか?
```

**期待されるAI応答**:
```
「SS」の「新SS(W)」の「OCR対象」の「補正」において、
品川から田中 太郎さん（または佐藤 花子さん）を札幌へ配置転換することを提案します。
```

**実際のデータ**:
- 品川: 2名配置 (田中 太郎, 佐藤 花子) → 普通（余剰ではない）
- 札幌: 1名配置 (加藤 正義) → 不足

**注意**: 品川が2名なので余剰候補にならない可能性があります。
エントリ1の方が良いデモになります。

---

### パターン3: シンプルな質問 (AIが階層を補完)

**質問**:
```
札幌のエントリ1が人員不足です
```

**期待されるAI応答**:
```
「SS」の「新SS(W)」の「OCR対象」の「エントリ1」において、
品川から田中 太郎さんを札幌へ配置転換することを提案します。
```

**テスト結果**:
- ✅ AIが自動的に4階層を補完
- ✅ 正確な配置転換提案

---

## 📊 実データの状況

### SS > 新SS(W) > OCR対象 > エントリ1

| 拠点 | 人数 | オペレータ | 状態 |
|------|------|----------|------|
| **品川** | 3名 | 田中 太郎, 佐藤 花子, 鈴木 一郎 | ✅ 余剰 |
| 本町東 | 2名 | 渡辺 健一, 伊藤 さくら | 普通 |
| **札幌** | 1名 | 井村 美子 | ⚠️ 不足 |

### SS > 新SS(W) > OCR対象 > 補正

| 拠点 | 人数 | オペレータ | 状態 |
|------|------|----------|------|
| 品川 | 2名 | 田中 太郎, 佐藤 花子 | 普通 |
| **札幌** | 1名 | 加藤 正義 | ⚠️ 不足 |

---

## 🎬 デモ動画の流れ

### ステップ1: システム起動確認
```bash
cd /Users/umemiya/Desktop/erax/aimee-fe
./docker-check-status.sh
```

**表示内容**:
- ✅ バックエンドAPI (8002番ポート)
- ✅ フロントエンド (8501番ポート)
- ✅ 全コンテナ起動中

---

### ステップ2: フロントエンドにアクセス
```
http://localhost:8501
```

**画面**: チャット画面が表示される

---

### ステップ3: 質問を入力

**入力**:
```
札幌のSSの新SS(W)のOCR対象のエントリ1が人員不足で遅延しています。
品川から応援を出せますか?
```

**処理時間**: 約11〜14秒

---

### ステップ4: AI応答を確認

**表示される応答**:
```
「SS」の「新SS(W)」の「OCR対象」の「エントリ1」において、
品川から鈴木 一郎さんを札幌へ配置転換することを提案します。
```

**提案カード**:
```
【配置転換提案】
提案ID: SGT20251008-181557
信頼度: 0.85 (85%)

【配置転換内容】
移動元: 品川
移動先: 札幌
工程: エントリ1
人数: 1名
対象者: 鈴木 一郎さん

【期待効果】
生産性: +10%
遅延削減: -15分
品質: 維持
```

---

### ステップ5: 承認・却下

- ✅ 承認ボタンをクリック
- DB (`approval_history` テーブル) に保存される
- 別アプリから読み取り可能

---

## 🎥 デモ動画で強調すべきポイント

### 1. 4階層の明示 ⭐最重要
「SS」の「新SS(W)」の「OCR対象」の「エントリ1」
→ どの業務のどの工程か明確

### 2. 実データに基づく提案
- 品川の実際のオペレータ名 (田中 太郎, 佐藤 花子, 鈴木 一郎)
- 札幌の実際の配置状況 (井村 美子: 1名で不足)

### 3. 具体的なオペレータ名
「◯◯さん、◯◯さんを移動してください」
→ 実名で提示

### 4. 処理時間
約11〜14秒でAI応答 → 実用的な速度

---

## 📝 デモ台本例

> **ナレーション**:
> 「こちらがAIMEE、AI配置最適化システムです。」
>
> 「例えば、札幌の社会保険、新SS(W)、OCR対象のエントリ1工程で
> 人員不足が発生した場合、このように質問します。」
>
> *[質問を入力]*
>
> 「約10秒でAIが分析し、適切な配置転換を提案します。」
>
> *[AI応答を表示]*
>
> 「ご覧の通り、AIは4つの階層、つまり
> 大分類のSS、業務タイプの新SS(W)、OCR区分のOCR対象、
> そして工程のエントリ1を明示した上で、
> 品川から鈴木一郎さんを札幌へ配置することを提案しています。」
>
> 「この提案は、実際のデータベースに保存されている
> オペレータの配置状況とスキル情報に基づいており、
> 信頼度85%という高い精度です。」
>
> 「承認ボタンを押すと、この配置転換がデータベースに記録され、
> 別システムから読み取ることができます。」

---

## 🔧 修正した箇所まとめ

### 1. バックエンド: `app/services/ollama_service.py`
- ✅ AIプロンプトに4階層明示を指示
- ✅ サマリー生成にオペレータ名を含める

### 2. バックエンド: `app/services/database_service.py`
- ✅ 実オペレータデータから余剰・不足を計算
- ✅ オペレータ取得クエリに4階層情報を追加
- ✅ 4階層キーでオペレータをグルーピング

### 3. バックエンド: `app/services/integrated_llm_service.py`
- ✅ 4階層フィルタリングでオペレータを選択
- ✅ operators配列に選択したオペレータ名を追加

### 4. スキーマ: `app/schemas/responses/chat.py`
- ✅ `AllocationChange`に`operators`フィールドを追加

---

## 📈 テスト結果

| パターン | 4階層 | オペレータ名 | 処理時間 | 結果 |
|---------|------|----------|---------|------|
| パターン1 (基本) | 4/4 ✅ | 鈴木 一郎 ✅ | 11.0秒 | ✅ PASS |
| パターン2 (補正) | 4/4 ✅ | 佐藤 花子 ✅ | 14.2秒 | ✅ PASS |
| パターン3 (シンプル) | 4/4 ✅ | 鈴木 一郎 ✅ | 14.2秒 | ✅ PASS |

**成功率: 100% (3/3)**

---

## 🚀 デモ動画撮影の準備完了

### 起動コマンド
```bash
cd /Users/umemiya/Desktop/erax/aimee-fe
./docker-start-all.sh
```

### アクセスURL
```
http://localhost:8501
```

### 推奨質問文
```
札幌のSSの新SS(W)のOCR対象のエントリ1が人員不足で遅延しています。
品川から応援を出せますか?
```

### 期待される応答
```
「SS」の「新SS(W)」の「OCR対象」の「エントリ1」において、
品川から鈴木 一郎さん(または田中 太郎さん、佐藤 花子さん)を
札幌へ配置転換することを提案します。
```

---

**作成日**: 2025-10-09
**最終更新**: 2025-10-26
**テスト完了日時**: 2025-10-26 22:00
**成功率**: 100%
**バージョン**: 2.0.0 - スキルベースマッチング対応
**デモ準備**: 完了 ✅

---

## 📝 v2.0.0の主な変更点（2025-10-26）

### スキルベースマッチング実装
- **異なる工程間移動**: エントリ2 → エントリ1
- **拠点名削除**: 4階層のみの表記
- **スキル保証**: スキル保有確認済みのオペレータのみ提案

### 期待される応答の変更

**旧バージョン（v1.0.0）**:
```
品川から鈴木 一郎さんを札幌へ配置転換
```

**新バージョン（v2.0.0）**:
```
「SS」の「新SS(W)」の「OCR非対象」の「エントリ2」から
櫻井　由希恵さんを「OCR対象」の「エントリ1」へ1人移動
```

### メリット
- ✅ 同じ工程間の無意味な移動を回避
- ✅ スキル互換性を保証
- ✅ より柔軟な人員配置が可能
